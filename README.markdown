See [New In iPhone 3.0 Tutorial Series, Part 1: Shake To Undo/Redo, NSUndoManager](http://www.mobileorchard.com/new-in-iphone-30-tutorial-series-part-1-shake-to-undoredo-nsundomanager) for the tutorial.

